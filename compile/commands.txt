Command Line Prompts for Minification |
---------------------------------------
| algorithmIV-app-core.js |
v                         v

## Place all of the sections into one file ##
sed -e "/FILENAME.js/ r src\app-core\FILENAME.js" -e "/public-api.js/ r src\app-core\public-api.js" -e "/external-api.js/ r src\app-core\external-api.js" -e "/module-vars.js/ r src\app-core\module-vars.js" -e "/module-methods.js/ r src\app-core\module-methods.js" -e "/app.js/ r src\app-core\app.js" -e "/sources.js/ r src\app-core\sources.js" -e "/debug.js/ r src\app-core\debug.js" <src\app-core\skeleton.js>src\algorithmIV-app-core-test.js

## Remove the copyright ##
sed "3,21 d" <src\algorithmIV-app-core.js>compile\algorithmIV-app-core.temp.js

## Minify the script ##
java -jar compile\compiler.jar --js compile\algorithmIV-app-core.temp.js --define DEBUG=false --externs compile\externs-app-core.js --js_output_file compile\algorithmIV-app-core.min.temp.js

## Insert copyright and overwrite src min file ##
sed -e "2 r compile\app-core-copyright.txt" -e "1,2 d" <compile\algorithmIV-app-core.min.temp.js>src\algorithmIV-app-core.min.js

---------------------------------------
| algorithmIV-app-data.js |
v                         v

## Remove the part to be unchanged ##
sed -e "1,/sedFlagWorkerStart/ d" -e "/sedFlagWorkerEnd/,/sedFlagEnd/ d" <src\algorithmIV-app-data.js>compile\algorithmIV-app-data.temp.js

## Minify the script ##
java -jar compiler.jar --js algorithmIV\algorithmIV-app-data.temp.js --externs algorithmIV\externs-app-data.js --js_output_file algorithmIV\algorithmIV-app-data.min.temp.js

## Insert minified script back into original and overwrite src min file ##
sed -e "/sedFlagWorkerStart/,/sedFlagWorkerEnd/ d" -e "/sedFlagMinifyInsert/ r compile\algorithmIV-app-data.min.temp.js" -e "/sedFlagMinifyInsert/ d" -e "/sedFlagEnd/ d" <src\algorithmIV-app-data.js>src\algorithmIV-app-data.min.js
